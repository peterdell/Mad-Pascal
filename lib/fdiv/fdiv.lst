mads 2.1.7 build 10 (19 Jan 24)
Source: D:\!Delphi\MadPascal\lib\fdiv\fdiv.asm
     1
     2
     3 = 0000			.extrn	eax, ecx	.byte
     4
     5 = 0000			.extrn	square1_lo, square1_hi, square2_lo, square2_hi	.word
     6
     7 = 0000			.extrn	fmulu_16 .word
     8
     9 				.public fastdiv, fastdivS
    10
    11
    12 FFFF> 01,0000-0467> 4D + 	.reloc
    13
    14
    15 01,0000 00 00 00 56 00 + lrcp	ins 'lrcp.bin'
    16
    17 01,0200 00 00 80 55 40 + hrcp	ins 'hrcp.bin'
    18
    19 				// ---------------------------------------------------------------
    20 01,0400			.proc	fastdiv //(.word eax .word ecx) .var
    21
    22 01,0400 A4 00			ldy ecx
    23 01,0402 A5 01			lda ecx+1
    24 01,0404 D0 1A			bne _hi
    25
    26 01,0406 C0 02			cpy #2
    27 01,0408 B0 09			bcs skp
    28
    29 01,040A A5 00 85 02 A5 + 	mwa eax eax+2
    30 					
    31 01,0412 60			rts
    32 01,0413			skp
    33 01,0413 B9 00 00			lda lrcp,y
    34 01,0416 85 00			sta ecx
    35 01,0418 B9 00 02			lda hrcp,y
    36 01,041B 85 01			sta ecx+1
    37 					
    38 01,041D 4C 00 00			jmp fmulu_16
    39
    40 01,0420			_hi
    41 01,0420 B9 00 01			lda lrcp+$100,y
    42 01,0423 85 00			sta ecx
    43 01,0425 B9 00 03			lda hrcp+$100,y
    44 01,0428 85 01			sta ecx+1
    45 					
    46 01,042A 4C 00 00			jmp fmulu_16
    47 				.endp
    48
    49
    50 01,042D			.proc	fastdivS //(.word eax .word ecx) .var
    51
    52 01,042D A5 01			lda eax+1
    53 01,042F 45 01			eor ecx+1
    54 01,0431 08			php
    55
    56 01,0432 A5 01			lda eax+1				; dividend sign
    57 01,0434 10 0D			bpl @+
    58 					
    59 01,0436 A9 00			lda #$00
    60 01,0438 38 E5 00			sub eax
    61 01,043B 85 00			sta eax
    62
    63 01,043D A9 00			lda #$00
    64 01,043F E5 01			sbc eax+1
    65 01,0441 85 01			sta eax+1
    66 				@
    67 01,0443 A5 01			lda ecx+1				; divisor sign
    68 01,0445 10 0D			bpl @+
    69
    70 01,0447 A9 00			lda #$00
    71 01,0449 38 E5 00			sub ecx
    72 01,044C 85 00			sta ecx
    73
    74 01,044E A9 00			lda #$00
    75 01,0450 E5 01			sbc ecx+1
    76 01,0452 85 01			sta ecx+1
    77 				@
    78 01,0454 20 00 04			jsr fastdiv
    79
    80 01,0457 28			plp
    81 01,0458 10 0D			bpl @+
    82
    83 01,045A A9 00			lda #$00
    84 01,045C 38 E5 02			sub eax+2
    85 01,045F 85 02			sta eax+2
    86
    87 01,0461 A9 00			lda #$00
    88 01,0463 E5 03			sbc eax+3
    89 01,0465 85 03			sta eax+3
    90 				@
    91 01,0467 60			rts
    92 				.endp
    92 01,0468			BLK UPDATE ADDRESS
    92 01,0468 EF FF 57		
    92 01,0468 05 00 14 04 19 + 
    92 01,0468			BLK UPDATE EXTERNAL
    92 01,0468 EE FF 42		
    92 01,0468 0C 00 03 00 45 + ECX
    92 01,0468 EE FF 42		
    92 01,0468 0E 00 03 00 45 + EAX
    92 01,0468 EE FF 57		
    92 01,0468 02 00 08 00 46 + FMULU_16
    92 01,0468			BLK UPDATE PUBLIC
    92 01,0468 57 50 07 00 46 + FASTDIV
    92 01,0468 57 50 08 00 46 + FASTDIVS
